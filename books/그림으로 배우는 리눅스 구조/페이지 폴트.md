### 페이지 테이블에 할당되지 않은 가상 주소에 접근 시

- CPU에서 페이지 폴트라고 하는 예외가 발생한다.

> [!info] 예외
> 실행 중인 코드 중간에 끼어 들어 별도의 처리를 실행할 수 있도록 CPU가
> 제공하는 기능을 이용하는 동작 구조 방식
- 커널 메모리에 배치된 페이지 폴트 핸들러 처리가 실행된다.
- SIGSEGV 시그널을 프로세스에 송신
- SIGSEGV 시그널을 받은 프로세스는 강제 종료된다.

> [!info] 페이지 테이블 엔트리가 존재하지 않는 경우와 페이지 테이블 엔트리에 물리주소 값이 비어있는 경우
> 전자의 경우 프로세스에 SIGSEGV를 보낸다.
> 후자의 경우 새로운 메모리를 할당하는 처리로 분기된다.


> [!info] 프로그래밍 언어 번역기와 메모리 관리
> 소스코드에 데이터 정의했다면 해당하는 데이터에 대응하는 메모리 할당이 필요하다.
> 하지만 인터프리터 나컴파일러 등은 데이터 정의 시마다 mmap() 시스템 콜을 호출하지 않고
> 보통은 프로그램 시작할 때 mmap() 시스템 콜을 해서 메모리 영역을 미리 확보하고
> 데이터 정의할 때마다 영역에서 메모리를 나눠서 할당한다.
> 영역 모두 사용 시 다시 mmap()을 호출해서 추가로 메모리 영역을 확보한다.

### 커널의 메모리 확보 순서
1. 프로세스는 XX 바이트 메모리 필요하다고 시스템 콜 호출로 커널에 요청
2. 메모리 영역 할당: 가상 주소 공간에 새롭게 접근 가능한 메모리 영역 매핑
3. 메모리 할당: 페이지 폴트 시 확보한 메모리 영역에 물리 메모리할당
4. 가상 주소 공간의 시작 위치 주소를 프로세스에 돌려줌

#linux 